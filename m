Return-Path: <linux-xtensa-bounces@linux-xtensa.org>
X-Original-To: lists+linux-xtensa@lfdr.de
Delivered-To: lists+linux-xtensa@lfdr.de
Received: from linux-xtensa.org (linux-xtensa.org [54.208.7.158])
	by mail.lfdr.de (Postfix) with ESMTP id 14FA023FCFF
	for <lists+linux-xtensa@lfdr.de>; Sun,  9 Aug 2020 08:28:39 +0200 (CEST)
Received: from linux-xtensa.org (localhost [127.0.0.1])
	by linux-xtensa.org (Postfix) with ESMTP id C4C5A3A8A;
	Sun,  9 Aug 2020 06:11:34 +0000 (UTC)
X-Original-To: linux-xtensa@linux-xtensa.org
Delivered-To: linux-xtensa@linux-xtensa.org
Received: from mail-pj1-f67.google.com (mail-pj1-f67.google.com
 [209.85.216.67])
 by linux-xtensa.org (Postfix) with ESMTPS id A6993348C
 for <linux-xtensa@linux-xtensa.org>; Sun,  9 Aug 2020 06:11:33 +0000 (UTC)
Received: by mail-pj1-f67.google.com with SMTP id l60so3092439pjb.3
 for <linux-xtensa@linux-xtensa.org>; Sat, 08 Aug 2020 23:28:37 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20161025;
 h=from:to:cc:subject:date:message-id:mime-version
 :content-transfer-encoding;
 bh=UcsVBKwWWQoOnYcE5guMpxp9La3HrdAMHJ30d+tHcW4=;
 b=C6Taq+xJt1/hoOBDvVos0npCaF2v5HXfP0bKv7+ooW8sgVCXYVuJIs304ixGfzfbRO
 LU+wGTVT+LBBHmed59SbT3V//m8LRKjZ+MK1bG3YAwuTxV/C22uuBGMwW9j300awzjGF
 nR2Jex7wIpIu16WcWp8WA81HCVE5UuTVccl0P6sGXi343zq4OrejLY0JVQt8Vd2tbsfu
 GOMsrq4WYscroBqrsa0CkILvE4cZyL8cZn9h1iR15w84HF1snL0i7K0ovkz6idE78vkw
 jcPQa28vZ4modSxAZE5viL6wFOHRIBb1nbWk8uF7iA4gwuXiIhDXJB6syIfJeqO4P/Nn
 qtog==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:mime-version
 :content-transfer-encoding;
 bh=UcsVBKwWWQoOnYcE5guMpxp9La3HrdAMHJ30d+tHcW4=;
 b=CL6r74lqSX5k+7B6Pe8ujIJefi5CjOnPL/AAYoGpG9vZFxMVxsD0lvg7xwl/suegD7
 pjYQhS5MA5CUZ7mVsnVKfQl9vq4/Rdut6wTRKQJkLaet5q2BLSXEB4YXGsCl+2hsIfat
 FaPTSCKt/02HhwEOXd2vw3Z50iSC3Z2SF2pwpHmoiXWt3w31i9R49PIpoyH3TVyha35b
 Vqvnz51bwhSK9o16eqy8esV6CXcoQExywa+oGqPw/84d7h4o0IIEO2rSQNgWmi0R7PX6
 GhIVgXsyRwo1wHuloj/OxOPRAthd1hOkBSFtMPpcl4l9prvFfcfhAV7Rm4pkDWOs1BEn
 BY7A==
X-Gm-Message-State: AOAM5329lJ28aSBN8QKsieEBNM29zPqUaZHWvHrq4+YeLPX20M1H6wa1
 f/SriP6GBSPE3n9OucQ/PFDYWL/O
X-Google-Smtp-Source: ABdhPJz04iAVggg10MwAJyT2UGoNEgoJ6x93hfYYjQL4+MZ/QgrIRLQXq4VwN1p+34ajBhC4/LxesQ==
X-Received: by 2002:a17:902:7b85:: with SMTP id
 w5mr18805364pll.22.1596954516391; 
 Sat, 08 Aug 2020 23:28:36 -0700 (PDT)
Received: from octofox.metropolis ([2607:fb90:4e2a:9849:ec4c:126e:c341:8919])
 by smtp.gmail.com with ESMTPSA id
 k21sm16559021pgl.0.2020.08.08.23.28.34
 (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256);
 Sat, 08 Aug 2020 23:28:35 -0700 (PDT)
From: Max Filippov <jcmvbkbc@gmail.com>
To: devel@uclibc-ng.org
Date: Sat,  8 Aug 2020 23:28:17 -0700
Message-Id: <20200809062817.19107-1-jcmvbkbc@gmail.com>
X-Mailer: git-send-email 2.20.1
MIME-Version: 1.0
Cc: linux-xtensa@linux-xtensa.org, Max Filippov <jcmvbkbc@gmail.com>
Subject: [Linux-Xtensa] [PATCH] xtensa: add exclusive access support
X-BeenThere: linux-xtensa@linux-xtensa.org
X-Mailman-Version: 2.1.14
Precedence: list
List-Id: Generic discussions about Linux on Xtensa
 <linux-xtensa.linux-xtensa.org>
List-Unsubscribe: <http://lists.linux-xtensa.org/mailman/options/linux-xtensa>, 
 <mailto:linux-xtensa-request@linux-xtensa.org?subject=unsubscribe>
List-Archive: <http://lists.linux-xtensa.org/pipermail/linux-xtensa>
List-Post: <mailto:linux-xtensa@linux-xtensa.org>
List-Help: <mailto:linux-xtensa-request@linux-xtensa.org?subject=help>
List-Subscribe: <http://lists.linux-xtensa.org/mailman/listinfo/linux-xtensa>, 
 <mailto:linux-xtensa-request@linux-xtensa.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: linux-xtensa-bounces@linux-xtensa.org
Sender: linux-xtensa-bounces@linux-xtensa.org

QWRkIFhDSEFMIGRlZmluaXRpb25zIGZvciBTMzJDMUkgYW5kIEVYQ0xVU0lWRSBvcHRpb25zIHRv
Cnh0ZW5zYS1jb25maWcuaCwgaW5jbHVkZSBpdCBpbiBwbGFjZXMgdGhhdCBpbXBsZW1lbnQgYXRv
bWljIG9wZXJhdGlvbnMKYW5kIGFkZCBpbXBsZW1lbnRhdGlvbnMgd2l0aCBleGNsdXNpdmUgYWNj
ZXNzIG9wdGlvbiBvcGNvZGVzLgoKU2lnbmVkLW9mZi1ieTogTWF4IEZpbGlwcG92IDxqY212Ymti
Y0BnbWFpbC5jb20+Ci0tLQogbGliYy9zeXNkZXBzL2xpbnV4L3h0ZW5zYS9iaXRzL2F0b21pYy5o
ICAgICAgIHwgMTI4ICsrKysrKysrKysrKysrKysrKwogLi4uL3N5c2RlcHMvbGludXgveHRlbnNh
L2JpdHMveHRlbnNhLWNvbmZpZy5oIHwgICA2ICsKIC4uLi9saW51eHRocmVhZHMvc3lzZGVwcy94
dGVuc2EvcHQtbWFjaGluZS5oICB8ICA1NiArKysrKysrKwogLi4uL25wdGwvc3lzZGVwcy94dGVu
c2EvcHRocmVhZF9zcGluX2xvY2suUyAgIHwgIDE2ICsrKwogLi4uL3N5c2RlcHMveHRlbnNhL3B0
aHJlYWRfc3Bpbl90cnlsb2NrLlMgICAgIHwgIDE3ICsrKwogNSBmaWxlcyBjaGFuZ2VkLCAyMjMg
aW5zZXJ0aW9ucygrKQoKZGlmZiAtLWdpdCBhL2xpYmMvc3lzZGVwcy9saW51eC94dGVuc2EvYml0
cy9hdG9taWMuaCBiL2xpYmMvc3lzZGVwcy9saW51eC94dGVuc2EvYml0cy9hdG9taWMuaAppbmRl
eCBlZmMwMjdkMWFjMjUuLjE4YjgwOTk5ODA1NCAxMDA2NDQKLS0tIGEvbGliYy9zeXNkZXBzL2xp
bnV4L3h0ZW5zYS9iaXRzL2F0b21pYy5oCisrKyBiL2xpYmMvc3lzZGVwcy9saW51eC94dGVuc2Ev
Yml0cy9hdG9taWMuaApAQCAtMTgsNiArMTgsNyBAQAogI2lmbmRlZiBfQklUU19BVE9NSUNfSAog
I2RlZmluZSBfQklUU19BVE9NSUNfSCAgMQogCisjaW5jbHVkZSA8Yml0cy94dGVuc2EtY29uZmln
Lmg+CiAjaW5jbHVkZSA8aW50dHlwZXMuaD4KIAogdHlwZWRlZiBpbnQzMl90IGF0b21pYzMyX3Q7
CkBAIC01MCw2ICs1MSwxMjggQEAgdHlwZWRlZiB1aW50bWF4X3QgdWF0b21pY19tYXhfdDsKICNk
ZWZpbmUgX19hcmNoX2NvbXBhcmVfYW5kX2V4Y2hhbmdlX2Jvb2xfMTZfcmVsKG1lbSwgbmV3dmFs
LCBvbGR2YWwpIFwKICAgICAgIChhYm9ydCAoKSwgMCkKIAorI2lmIFhDSEFMX0hBVkVfRVhDTFVT
SVZFCisKKy8qIEF0b21pY2FsbHkgc3RvcmUgTkVXVkFMIGluICpNRU0gaWYgKk1FTSBpcyBlcXVh
bCB0byBPTERWQUwuCisgICBSZXR1cm4gdGhlIG9sZCAqTUVNIHZhbHVlLiAgKi8KKworI2RlZmlu
ZSBfX2FyY2hfY29tcGFyZV9hbmRfZXhjaGFuZ2VfdmFsXzMyX2FjcShtZW0sIG5ld3ZhbCwgb2xk
dmFsKSAgXAorICAoe19fdHlwZW9mX18oKihtZW0pKSBfX3RtcCwgX192YWx1ZTsgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgXAorICAgIF9fYXNtX18gX192b2xhdGlsZV9fKCAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXAorICAgICAgIiAgICAgICBtZW13
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuIiAgICAgICAgICAgICAgICAgICAgXAorICAg
ICAgIjE6ICAgICBsMzJleCAgICUwLCAlMiAgICAgICAgICAgICAgICAgIFxuIiAgICAgICAgICAg
ICAgICAgICAgXAorICAgICAgIiAgICAgICBibmUgICAgICUwLCAlNCwgMmYgICAgICAgICAgICAg
IFxuIiAgICAgICAgICAgICAgICAgICAgXAorICAgICAgIiAgICAgICBtb3YgICAgICUxLCAlMyAg
ICAgICAgICAgICAgICAgIFxuIiAgICAgICAgICAgICAgICAgICAgXAorICAgICAgIiAgICAgICBz
MzJleCAgICUxLCAlMiAgICAgICAgICAgICAgICAgIFxuIiAgICAgICAgICAgICAgICAgICAgXAor
ICAgICAgIiAgICAgICBnZXRleCAgICUxICAgICAgICAgICAgICAgICAgICAgIFxuIiAgICAgICAg
ICAgICAgICAgICAgXAorICAgICAgIiAgICAgICBiZXF6ICAgICUxLCAxYiAgICAgICAgICAgICAg
ICAgIFxuIiAgICAgICAgICAgICAgICAgICAgXAorICAgICAgIiAgICAgICBtZW13ICAgICAgICAg
ICAgICAgICAgICAgICAgICAgIFxuIiAgICAgICAgICAgICAgICAgICAgXAorICAgICAgIjI6ICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuIiAgICAgICAgICAgICAgICAgICAg
XAorICAgICAgOiAiPSZhIiAoX192YWx1ZSksICI9JmEiIChfX3RtcCkgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgXAorICAgICAgOiAiYSIgKG1lbSksICJhIiAobmV3dmFsKSwgImEiIChv
bGR2YWwpICAgICAgICAgICAgICAgICAgICAgICAgXAorICAgICAgOiAibWVtb3J5IiApOyAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXAorICAgIF9fdmFs
dWU7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgXAorICB9KQorCisvKiBBdG9taWNhbGx5IHN0b3JlIE5FV1ZBTCBpbiAqTUVNIGlmICpNRU0g
aXMgZXF1YWwgdG8gT0xEVkFMLgorICAgUmV0dXJuIHplcm8gaWYgKk1FTSB3YXMgY2hhbmdlZCBv
ciBub24temVybyBpZiBubyBleGNoYW5nZSBoYXBwZW5lZC4gICovCisKKyNkZWZpbmUgX19hcmNo
X2NvbXBhcmVfYW5kX2V4Y2hhbmdlX2Jvb2xfMzJfYWNxKG1lbSwgbmV3dmFsLCBvbGR2YWwpIFwK
KyAgKHtfX3R5cGVvZl9fKCoobWVtKSkgX190bXAsIF9fdmFsdWU7ICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIFwKKyAgICBfX2FzbV9fIF9fdm9sYXRpbGVfXyggICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwKKyAgICAgICIgICAgICAgbWVtdyAgICAgICAg
ICAgICAgICAgICAgICAgICAgICBcbiIgICAgICAgICAgICAgICAgICAgIFwKKyAgICAgICIxOiAg
ICAgbDMyZXggICAlMCwgJTIgICAgICAgICAgICAgICAgICBcbiIgICAgICAgICAgICAgICAgICAg
IFwKKyAgICAgICIgICAgICAgc3ViICAgICAlMCwgJTQsICUwICAgICAgICAgICAgICBcbiIgICAg
ICAgICAgICAgICAgICAgIFwKKyAgICAgICIgICAgICAgYm5leiAgICAlMCwgMmYgICAgICAgICAg
ICAgICAgICBcbiIgICAgICAgICAgICAgICAgICAgIFwKKyAgICAgICIgICAgICAgbW92ICAgICAl
MSwgJTMgICAgICAgICAgICAgICAgICBcbiIgICAgICAgICAgICAgICAgICAgIFwKKyAgICAgICIg
ICAgICAgczMyZXggICAlMSwgJTIgICAgICAgICAgICAgICAgICBcbiIgICAgICAgICAgICAgICAg
ICAgIFwKKyAgICAgICIgICAgICAgZ2V0ZXggICAlMSAgICAgICAgICAgICAgICAgICAgICBcbiIg
ICAgICAgICAgICAgICAgICAgIFwKKyAgICAgICIgICAgICAgYmVxeiAgICAlMSwgMWIgICAgICAg
ICAgICAgICAgICBcbiIgICAgICAgICAgICAgICAgICAgIFwKKyAgICAgICIgICAgICAgbW92aSAg
ICAlMCwgMCAgICAgICAgICAgICAgICAgICBcbiIgICAgICAgICAgICAgICAgICAgIFwKKyAgICAg
ICIgICAgICAgbWVtdyAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiIgICAgICAgICAgICAg
ICAgICAgIFwKKyAgICAgICIyOiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBc
biIgICAgICAgICAgICAgICAgICAgIFwKKyAgICAgIDogIj0mYSIgKF9fdmFsdWUpLCAiPSZhIiAo
X190bXApICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwKKyAgICAgIDogImEiIChtZW0p
LCAiYSIgKG5ld3ZhbCksICJhIiAob2xkdmFsKSAgICAgICAgICAgICAgICAgICAgICAgIFwKKyAg
ICAgIDogIm1lbW9yeSIgKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgIFwKKyAgICBfX3ZhbHVlICE9IDA7ICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIFwKKyAgfSkKKworLyogU3RvcmUgTkVXVkFMVUUgaW4g
Kk1FTSBhbmQgcmV0dXJuIHRoZSBvbGQgdmFsdWUuICAqLworCisjZGVmaW5lIF9fYXJjaF9leGNo
YW5nZV8zMl9hY3EobWVtLCBuZXd2YWwpICAgICAgICAgICAgICAgICAgICAgICAgICBcCisgICh7
X190eXBlb2ZfXygqKG1lbSkpIF9fdG1wLCBfX3ZhbHVlOyAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICBcCisgICAgX19hc21fXyBfX3ZvbGF0aWxlX18oICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICBcCisgICAgICAiICAgICAgIG1lbXcgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgXG4iICAgICAgICAgICAgICAgICAgICBcCisgICAgICAiMTogICAgIGwz
MmV4ICAgJTAsICUyICAgICAgICAgICAgICAgICAgXG4iICAgICAgICAgICAgICAgICAgICBcCisg
ICAgICAiICAgICAgIG1vdiAgICAgJTEsICUzICAgICAgICAgICAgICAgICAgXG4iICAgICAgICAg
ICAgICAgICAgICBcCisgICAgICAiICAgICAgIHMzMmV4ICAgJTEsICUyICAgICAgICAgICAgICAg
ICAgXG4iICAgICAgICAgICAgICAgICAgICBcCisgICAgICAiICAgICAgIGdldGV4ICAgJTEgICAg
ICAgICAgICAgICAgICAgICAgXG4iICAgICAgICAgICAgICAgICAgICBcCisgICAgICAiICAgICAg
IGJlcXogICAgJTEsIDFiICAgICAgICAgICAgICAgICAgXG4iICAgICAgICAgICAgICAgICAgICBc
CisgICAgICAiICAgICAgIG1lbXcgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4iICAgICAg
ICAgICAgICAgICAgICBcCisgICAgICA6ICI9JmEiIChfX3ZhbHVlKSwgIj0mYSIgKF9fdG1wKSAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcCisgICAgICA6ICJhIiAobWVtKSwgImEiIChu
ZXd2YWwpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcCisgICAgICA6ICJt
ZW1vcnkiICk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICBcCisgICAgX192YWx1ZTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICBcCisgIH0pCisKKy8qIEFkZCBWQUxVRSB0byAqTUVNIGFuZCByZXR1
cm4gdGhlIG9sZCB2YWx1ZSBvZiAqTUVNLiAgKi8KKworI2RlZmluZSBfX2FyY2hfYXRvbWljX2V4
Y2hhbmdlX2FuZF9hZGRfMzIobWVtLCB2YWx1ZSkgICAgICAgICAgICAgICAgXAorICAoe19fdHlw
ZW9mX18oKihtZW0pKSBfX3RtcCwgX192YWx1ZTsgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgXAorICAgIF9fYXNtX18gX192b2xhdGlsZV9fKCAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgXAorICAgICAgIiAgICAgICBtZW13ICAgICAgICAgICAgICAgICAg
ICAgICAgICAgIFxuIiAgICAgICAgICAgICAgICAgICAgXAorICAgICAgIjE6ICAgICBsMzJleCAg
ICUwLCAlMiAgICAgICAgICAgICAgICAgIFxuIiAgICAgICAgICAgICAgICAgICAgXAorICAgICAg
IiAgICAgICBhZGQgICAgICUxLCAlMCwgJTMgICAgICAgICAgICAgIFxuIiAgICAgICAgICAgICAg
ICAgICAgXAorICAgICAgIiAgICAgICBzMzJleCAgICUxLCAlMiAgICAgICAgICAgICAgICAgIFxu
IiAgICAgICAgICAgICAgICAgICAgXAorICAgICAgIiAgICAgICBnZXRleCAgICUxICAgICAgICAg
ICAgICAgICAgICAgIFxuIiAgICAgICAgICAgICAgICAgICAgXAorICAgICAgIiAgICAgICBiZXF6
ICAgICUxLCAxYiAgICAgICAgICAgICAgICAgIFxuIiAgICAgICAgICAgICAgICAgICAgXAorICAg
ICAgIiAgICAgICBtZW13ICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuIiAgICAgICAgICAg
ICAgICAgICAgXAorICAgICAgOiAiPSZhIiAoX192YWx1ZSksICI9JmEiIChfX3RtcCkgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgXAorICAgICAgOiAiYSIgKG1lbSksICJhIiAodmFsdWUp
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXAorICAgICAgOiAibWVtb3J5
IiApOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXAor
ICAgIF9fdmFsdWU7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgXAorICB9KQorCisvKiBTdWJ0cmFjdCBWQUxVRSBmcm9tICpNRU0gYW5kIHJl
dHVybiB0aGUgb2xkIHZhbHVlIG9mICpNRU0uICAqLworCisjZGVmaW5lIF9fYXJjaF9hdG9taWNf
ZXhjaGFuZ2VfYW5kX3N1Yl8zMihtZW0sIHZhbHVlKSAgICAgICAgICAgICAgICBcCisgICh7X190
eXBlb2ZfXygqKG1lbSkpIF9fdG1wLCBfX3ZhbHVlOyAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICBcCisgICAgX19hc21fXyBfX3ZvbGF0aWxlX18oICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICBcCisgICAgICAiICAgICAgIG1lbXcgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgXG4iICAgICAgICAgICAgICAgICAgICBcCisgICAgICAiMTogICAgIGwzMmV4
ICAgJTAsICUyICAgICAgICAgICAgICAgICAgXG4iICAgICAgICAgICAgICAgICAgICBcCisgICAg
ICAiICAgICAgIHN1YiAgICAgJTEsICUwLCAlMyAgICAgICAgICAgICAgXG4iICAgICAgICAgICAg
ICAgICAgICBcCisgICAgICAiICAgICAgIHMzMmV4ICAgJTEsICUyICAgICAgICAgICAgICAgICAg
XG4iICAgICAgICAgICAgICAgICAgICBcCisgICAgICAiICAgICAgIGdldGV4ICAgJTEgICAgICAg
ICAgICAgICAgICAgICAgXG4iICAgICAgICAgICAgICAgICAgICBcCisgICAgICAiICAgICAgIGJl
cXogICAgJTEsIDFiICAgICAgICAgICAgICAgICAgXG4iICAgICAgICAgICAgICAgICAgICBcCisg
ICAgICAiICAgICAgIG1lbXcgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4iICAgICAgICAg
ICAgICAgICAgICBcCisgICAgICA6ICI9JmEiIChfX3ZhbHVlKSwgIj0mYSIgKF9fdG1wKSAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICBcCisgICAgICA6ICJhIiAobWVtKSwgImEiICh2YWx1
ZSkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcCisgICAgICA6ICJtZW1v
cnkiICk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBc
CisgICAgX190bXA7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICBcCisgIH0pCisKKy8qIERlY3JlbWVudCAqTUVNIGlmIGl0IGlzID4gMCwg
YW5kIHJldHVybiB0aGUgb2xkIHZhbHVlLiAgKi8KKworI2RlZmluZSBfX2FyY2hfYXRvbWljX2Rl
Y3JlbWVudF9pZl9wb3NpdGl2ZV8zMihtZW0pICAgICAgICAgICAgICAgICAgXAorICAoe19fdHlw
ZW9mX18oKihtZW0pKSBfX3RtcCwgX192YWx1ZTsgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgXAorICAgIF9fYXNtX18gX192b2xhdGlsZV9fKCAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgXAorICAgICAgIiAgICAgICBtZW13ICAgICAgICAgICAgICAgICAg
ICAgICAgICAgIFxuIiAgICAgICAgICAgICAgICAgICAgXAorICAgICAgIjE6ICAgICBsMzJleCAg
ICUwLCAlMiAgICAgICAgICAgICAgICAgIFxuIiAgICAgICAgICAgICAgICAgICAgXAorICAgICAg
IiAgICAgICBibHRpICAgICUwLCAxLCAyZiAgICAgICAgICAgICAgIFxuIiAgICAgICAgICAgICAg
ICAgICAgXAorICAgICAgIiAgICAgICBhZGRpICAgICUxLCAlMCwgLTEgICAgICAgICAgICAgIFxu
IiAgICAgICAgICAgICAgICAgICAgXAorICAgICAgIiAgICAgICBzMzJleCAgICUxLCAlMiAgICAg
ICAgICAgICAgICAgIFxuIiAgICAgICAgICAgICAgICAgICAgXAorICAgICAgIiAgICAgICBnZXRl
eCAgICUxICAgICAgICAgICAgICAgICAgICAgIFxuIiAgICAgICAgICAgICAgICAgICAgXAorICAg
ICAgIiAgICAgICBiZXF6ICAgICUxLCAxYiAgICAgICAgICAgICAgICAgIFxuIiAgICAgICAgICAg
ICAgICAgICAgXAorICAgICAgIiAgICAgICBtZW13ICAgICAgICAgICAgICAgICAgICAgICAgICAg
IFxuIiAgICAgICAgICAgICAgICAgICAgXAorICAgICAgIjI6ICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgIFxuIiAgICAgICAgICAgICAgICAgICAgXAorICAgICAgOiAiPSZhIiAo
X192YWx1ZSksICI9JmEiIChfX3RtcCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXAor
ICAgICAgOiAiYSIgKG1lbSkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgXAorICAgICAgOiAibWVtb3J5IiApOyAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgXAorICAgIF9fdmFsdWU7ICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXAorICB9KQorCisjZWxp
ZiBYQ0hBTF9IQVZFX1MzMkMxSQorCiAvKiBBdG9taWNhbGx5IHN0b3JlIE5FV1ZBTCBpbiAqTUVN
IGlmICpNRU0gaXMgZXF1YWwgdG8gT0xEVkFMLgogICAgUmV0dXJuIHRoZSBvbGQgKk1FTSB2YWx1
ZS4gICovCiAKQEAgLTE1Niw2ICsyNzksMTEgQEAgdHlwZWRlZiB1aW50bWF4X3QgdWF0b21pY19t
YXhfdDsKICAgICBfX3ZhbHVlOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgIFwKICAgfSkKIAorI2Vsc2UKKworI2Vycm9yIE5vIGhhcmR3YXJl
IGF0b21pYyBvcGVyYXRpb25zCisKKyNlbmRpZgogCiAvKiBUaGVzZSBhcmUgdGhlIHByZWZlcnJl
ZCBwdWJsaWMgaW50ZXJmYWNlczogKi8KIApkaWZmIC0tZ2l0IGEvbGliYy9zeXNkZXBzL2xpbnV4
L3h0ZW5zYS9iaXRzL3h0ZW5zYS1jb25maWcuaCBiL2xpYmMvc3lzZGVwcy9saW51eC94dGVuc2Ev
Yml0cy94dGVuc2EtY29uZmlnLmgKaW5kZXggMmU2MGFmOTM2ZTZlLi5iOTk5MjhiMWUwNTggMTAw
NjQ0Ci0tLSBhL2xpYmMvc3lzZGVwcy9saW51eC94dGVuc2EvYml0cy94dGVuc2EtY29uZmlnLmgK
KysrIGIvbGliYy9zeXNkZXBzL2xpbnV4L3h0ZW5zYS9iaXRzL3h0ZW5zYS1jb25maWcuaApAQCAt
NDMsNCArNDMsMTAgQEAKICN1bmRlZiBYQ0hBTF9OVU1fQVJFR1MKICNkZWZpbmUgWENIQUxfTlVN
X0FSRUdTCQkJNjQKIAorI3VuZGVmIFhDSEFMX0hBVkVfUzMyQzFJCisjZGVmaW5lIFhDSEFMX0hB
VkVfUzMyQzFJCQkxCisKKyN1bmRlZiBYQ0hBTF9IQVZFX0VYQ0xVU0lWRQorI2RlZmluZSBYQ0hB
TF9IQVZFX0VYQ0xVU0lWRQkJMAorCiAjZW5kaWYgLyogIVhURU5TQV9DT05GSUdfSCAqLwpkaWZm
IC0tZ2l0IGEvbGlicHRocmVhZC9saW51eHRocmVhZHMvc3lzZGVwcy94dGVuc2EvcHQtbWFjaGlu
ZS5oIGIvbGlicHRocmVhZC9saW51eHRocmVhZHMvc3lzZGVwcy94dGVuc2EvcHQtbWFjaGluZS5o
CmluZGV4IDgyZDliNTQwYzYxMS4uMGI3ZjU4YjYzNWYzIDEwMDY0NAotLS0gYS9saWJwdGhyZWFk
L2xpbnV4dGhyZWFkcy9zeXNkZXBzL3h0ZW5zYS9wdC1tYWNoaW5lLmgKKysrIGIvbGlicHRocmVh
ZC9saW51eHRocmVhZHMvc3lzZGVwcy94dGVuc2EvcHQtbWFjaGluZS5oCkBAIC0yMSw2ICsyMSw3
IEBACiAjaWZuZGVmIF9QVF9NQUNISU5FX0gKICNkZWZpbmUgX1BUX01BQ0hJTkVfSCAgIDEKIAor
I2luY2x1ZGUgPGJpdHMveHRlbnNhLWNvbmZpZy5oPgogI2luY2x1ZGUgPHN5cy9zeXNjYWxsLmg+
CiAjaW5jbHVkZSA8YXNtL3VuaXN0ZC5oPgogCkBAIC0zNCw2ICszNSw1NSBAQAogZXh0ZXJuIGxv
bmcgaW50IHRlc3RhbmRzZXQgKGludCAqc3BpbmxvY2spOwogZXh0ZXJuIGludCBfX2NvbXBhcmVf
YW5kX3N3YXAgKGxvbmcgaW50ICpwLCBsb25nIGludCBvbGR2YWwsIGxvbmcgaW50IG5ld3ZhbCk7
CiAKKyNpZiBYQ0hBTF9IQVZFX0VYQ0xVU0lWRQorCisvKiBTcGlubG9jayBpbXBsZW1lbnRhdGlv
bjsgcmVxdWlyZWQuICAqLworUFRfRUkgbG9uZyBpbnQKK3Rlc3RhbmRzZXQgKGludCAqc3Bpbmxv
Y2spCit7CisJdW5zaWduZWQgbG9uZyB0bXA7CisJX19hc21fXyB2b2xhdGlsZSAoCisiCW1lbXcJ
CQkJXG4iCisiMToJbDMyZXgJJTAsICUxCQkJXG4iCisiCWJuZXoJJTAsIDJmCQkJXG4iCisiCW1v
dmkJJTAsIDEJCQlcbiIKKyIJczMyZXgJJTAsICUxCQkJXG4iCisiCWdldGV4CSUwCQkJXG4iCisi
CWJlcXoJJTAsIDFiCQkJXG4iCisiCW1vdmkJJTAsIDAJCQlcbiIKKyIJbWVtdwkJCQlcbiIKKyIy
OgkJCQkJXG4iCisJOiAiPSZhIiAodG1wKQorCTogImEiIChzcGlubG9jaykKKwk6ICJtZW1vcnki
CisJKTsKKwlyZXR1cm4gdG1wOworfQorCitQVF9FSSBpbnQKK19fY29tcGFyZV9hbmRfc3dhcCAo
bG9uZyBpbnQgKnAsIGxvbmcgaW50IG9sZHZhbCwgbG9uZyBpbnQgbmV3dmFsKQoreworICAgICAg
ICB1bnNpZ25lZCBsb25nIHRtcDsKKyAgICAgICAgdW5zaWduZWQgbG9uZyB2YWx1ZTsKKyAgICAg
ICAgX19hc21fXyB2b2xhdGlsZSAoCisiICAgICAgIG1lbXcgICAgICAgICAgICAgICAgICAgICAg
ICAgXG4iCisiMTogICAgIGwzMmV4ICAgJTAsICUyICAgICAgICAgICAgICAgXG4iCisiICAgICAg
IGJuZSAgICAgJTAsICU0LCAyZiAgICAgICAgICAgXG4iCisiICAgICAgIG1vdiAgICAgJTEsICUz
ICAgICAgICAgICAgICAgXG4iCisiICAgICAgIHMzMmV4ICAgJTEsICUyICAgICAgICAgICAgICAg
XG4iCisiICAgICAgIGdldGV4ICAgJTEgICAgICAgICAgICAgICAgICAgXG4iCisiICAgICAgIGJl
cXogICAgJTEsIDFiICAgICAgICAgICAgICAgXG4iCisiICAgICAgIG1lbXcgICAgICAgICAgICAg
ICAgICAgICAgICAgXG4iCisiMjogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4i
CisgICAgICAgICAgOiAiPSZhIiAodG1wKSwgIj0mYSIgKHZhbHVlKQorICAgICAgICAgIDogImEi
IChwKSwgImEiIChuZXd2YWwpLCAiYSIgKG9sZHZhbCkKKyAgICAgICAgICA6ICJtZW1vcnkiICk7
CisKKyAgICAgICAgcmV0dXJuIHRtcCA9PSBvbGR2YWw7Cit9CisKKyNlbGlmIFhDSEFMX0hBVkVf
UzMyQzFJCisKIC8qIFNwaW5sb2NrIGltcGxlbWVudGF0aW9uOyByZXF1aXJlZC4gICovCiBQVF9F
SSBsb25nIGludAogdGVzdGFuZHNldCAoaW50ICpzcGlubG9jaykKQEAgLTcxLDYgKzEyMSwxMiBA
QCBfX2NvbXBhcmVfYW5kX3N3YXAgKGxvbmcgaW50ICpwLCBsb25nIGludCBvbGR2YWwsIGxvbmcg
aW50IG5ld3ZhbCkKICAgICAgICAgcmV0dXJuIHRtcCA9PSBvbGR2YWw7CiB9CiAKKyNlbHNlCisK
KyNlcnJvciBObyBoYXJkd2FyZSBhdG9taWMgb3BlcmF0aW9ucworCisjZW5kaWYKKwogLyogR2V0
IHNvbWUgbm90aW9uIG9mIHRoZSBjdXJyZW50IHN0YWNrLiAgTmVlZCBub3QgYmUgZXhhY3RseSB0
aGUgdG9wCiAgICBvZiB0aGUgc3RhY2ssIGp1c3Qgc29tZXRoaW5nIHNvbWV3aGVyZSBpbiB0aGUg
Y3VycmVudCBmcmFtZS4gICovCiAjZGVmaW5lIENVUlJFTlRfU1RBQ0tfRlJBTUUgX19idWlsdGlu
X2ZyYW1lX2FkZHJlc3MgKDApCmRpZmYgLS1naXQgYS9saWJwdGhyZWFkL25wdGwvc3lzZGVwcy94
dGVuc2EvcHRocmVhZF9zcGluX2xvY2suUyBiL2xpYnB0aHJlYWQvbnB0bC9zeXNkZXBzL3h0ZW5z
YS9wdGhyZWFkX3NwaW5fbG9jay5TCmluZGV4IDMzODZhZmFlOWU1OC4uM2ZhYWMzNmRhMTJiIDEw
MDY0NAotLS0gYS9saWJwdGhyZWFkL25wdGwvc3lzZGVwcy94dGVuc2EvcHRocmVhZF9zcGluX2xv
Y2suUworKysgYi9saWJwdGhyZWFkL25wdGwvc3lzZGVwcy94dGVuc2EvcHRocmVhZF9zcGluX2xv
Y2suUwpAQCAtMTUsMTYgKzE1LDMyIEBACiAgICBMaWNlbnNlIGFsb25nIHdpdGggdGhlIEdOVSBD
IExpYnJhcnk7IHNlZSB0aGUgZmlsZSBDT1BZSU5HLkxJQi4gIElmCiAgICBub3QsIHNlZSA8aHR0
cDovL3d3dy5nbnUub3JnL2xpY2Vuc2VzLz4uwqDCoCovCiAKKyNpbmNsdWRlIDxiaXRzL3h0ZW5z
YS1jb25maWcuaD4KICNpbmNsdWRlIDxzeXNkZXAuaD4KIAogCS50ZXh0CiBFTlRSWSAocHRocmVh
ZF9zcGluX2xvY2spCiAKKyNpZiBYQ0hBTF9IQVZFX0VYQ0xVU0lWRQorCW1lbXcKKzE6CWwzMmV4
CWEzLCBhMgorCWJuZXoJYTMsIDFiCisJbW92aQlhMywgMQorCXMzMmV4CWEzLCBhMgorCWdldGV4
CWEzCisJYmVxeglhMywgMWIKKwltZW13CisjZWxpZiBYQ0hBTF9IQVZFX1MzMkMxSQogCW1vdmkJ
YTMsIDAKIAl3c3IgCWEzLCBzY29tcGFyZTEKIAltb3ZpCWEzLCAxCiAxOglzMzJjMWkJYTMsIGEy
LCAwCiAJYm5leglhMywgMWIKKyNlbHNlCisKKyNlcnJvciBObyBoYXJkd2FyZSBhdG9taWMgb3Bl
cmF0aW9ucworCisjZW5kaWYKIAltb3ZpCWEyLCAwCiAKIAlhYmlfcmV0CmRpZmYgLS1naXQgYS9s
aWJwdGhyZWFkL25wdGwvc3lzZGVwcy94dGVuc2EvcHRocmVhZF9zcGluX3RyeWxvY2suUyBiL2xp
YnB0aHJlYWQvbnB0bC9zeXNkZXBzL3h0ZW5zYS9wdGhyZWFkX3NwaW5fdHJ5bG9jay5TCmluZGV4
IDcyYjJkZGE5MjMxMC4uMDY2OTY4MmVjOWJkIDEwMDY0NAotLS0gYS9saWJwdGhyZWFkL25wdGwv
c3lzZGVwcy94dGVuc2EvcHRocmVhZF9zcGluX3RyeWxvY2suUworKysgYi9saWJwdGhyZWFkL25w
dGwvc3lzZGVwcy94dGVuc2EvcHRocmVhZF9zcGluX3RyeWxvY2suUwpAQCAtMTcsMTUgKzE3LDMy
IEBACiAKICNkZWZpbmUgX0VSUk5PX0ggMQogI2luY2x1ZGUgPGJpdHMvZXJybm8uaD4KKyNpbmNs
dWRlIDxiaXRzL3h0ZW5zYS1jb25maWcuaD4KICNpbmNsdWRlIDxzeXNkZXAuaD4KIAogCS50ZXh0
CiBFTlRSWSAocHRocmVhZF9zcGluX3RyeWxvY2spCiAKKyNpZiBYQ0hBTF9IQVZFX0VYQ0xVU0lW
RQorCW1lbXcKKwlsMzJleAlhMywgYTIKKwlibmV6CWEzLCAxZgorCW1vdmkJYTMsIDEKKwlzMzJl
eAlhMywgYTIKKwlnZXRleAlhMworCWFkZGkJYTMsIGEzLCAtMQorCW1lbXcKKzE6CisjZWxpZiBY
Q0hBTF9IQVZFX1MzMkMxSQogCW1vdmkJYTMsIDAKIAl3c3IgCWEzLCBzY29tcGFyZTEKIAltb3Zp
CWEzLCAxCiAJczMyYzFpCWEzLCBhMiwgMAorI2Vsc2UKKworI2Vycm9yIE5vIGhhcmR3YXJlIGF0
b21pYyBvcGVyYXRpb25zCisKKyNlbmRpZgogCW1vdmkJYTIsIEVCVVNZCiAJbW92ZXF6CWEyLCBh
MywgYTMKIAotLSAKMi4yMC4xCgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fXwpsaW51eC14dGVuc2EgbWFpbGluZyBsaXN0CmxpbnV4LXh0ZW5zYUBsaW51eC14
dGVuc2Eub3JnCmh0dHA6Ly9saXN0cy5saW51eC14dGVuc2Eub3JnL21haWxtYW4vbGlzdGluZm8v
bGludXgteHRlbnNhCg==
